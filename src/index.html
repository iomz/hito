<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Browser</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <div id="root"></div>
    <button id="hotkey-sidebar-toggle" class="hotkey-sidebar-toggle" aria-label="Toggle configuration sidebar">
      <span class="hamburger-icon">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>
    <main class="container">
      <h1>Hito</h1>

      <div class="path-input-container">
        <div id="drop-zone" class="drop-zone">
          <div class="drop-zone-content">
            <svg class="drop-icon" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <p class="drop-text">Drag and drop a folder here</p>
            <p class="drop-hint">or click to select a folder</p>
          </div>
        </div>
        <div id="current-path" class="current-path"></div>
        <p id="error-msg" class="error"></p>
      </div>

      <div id="loading-spinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
        <p>Loading images...</p>
      </div>

      <div id="image-grid" class="image-grid"></div>

      <div id="hotkey-sidebar" class="hotkey-sidebar">
          <div class="hotkey-sidebar-header">
            <h3>Configuration</h3>
            <button id="hotkey-sidebar-close" class="hotkey-sidebar-close" aria-label="Close sidebar">&times;</button>
          </div>
          <div class="hotkey-sidebar-content">
            <div class="sidebar-tabs">
              <button class="sidebar-tab active" data-tab="categories">Categories</button>
              <button class="sidebar-tab" data-tab="hotkeys">Hotkeys</button>
              <button class="sidebar-tab" data-tab="file">File</button>
            </div>
            
            <div id="categories-panel" class="sidebar-panel active">
              <div class="panel-header">
                <h4>Image Categories</h4>
                <button id="add-category-btn" class="add-category-btn">+ Add</button>
              </div>
              <div id="category-list" class="category-list"></div>
              <div id="current-image-categories" class="current-image-categories"></div>
            </div>
            
            <div id="hotkeys-panel" class="sidebar-panel">
              <div id="hotkey-list" class="hotkey-list"></div>
              <button id="add-hotkey-btn" class="add-hotkey-btn">+ Add Hotkey</button>
            </div>
            
            <div id="file-panel" class="sidebar-panel">
              <div class="panel-header">
                <h4>Configuration File</h4>
              </div>
              <div class="file-settings">
                <label for="config-file-path">Config File Path:</label>
                <input type="text" id="config-file-path" class="config-file-input" placeholder=".hito.json" />
                <p class="file-hint">Default: Current directory's .hito.json</p>
              </div>
            </div>
          </div>
        </div>

      <div id="image-modal" class="modal">
        <span class="close">&times;</span>
        <button class="modal-nav modal-nav-prev" id="modal-prev">&#10094;</button>
        <button class="modal-nav modal-nav-next" id="modal-next">&#10095;</button>
        <img id="modal-image" class="modal-content" />
        <div id="modal-caption" class="modal-caption">
          <span id="modal-caption-text"></span>
          <span id="modal-categories" class="modal-categories"></span>
        </div>
        <div id="keyboard-shortcuts-overlay" class="keyboard-shortcuts-overlay">
          <div class="shortcuts-content">
            <h2>Keyboard Shortcuts</h2>
            <div id="shortcuts-list"></div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
